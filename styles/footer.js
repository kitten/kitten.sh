import React, { useCallback } from 'react';
import galite from '@philpl/ga-lite';
import { styled } from 'goober';

import { sizes, tablet, mobile, desktop } from './theme';
import { getTwitterShareLink } from './util';
import twitterSvg from '../assets/twitter.svg';

const Halloumi = styled(props => (
  <svg {...props} viewBox="0 0 87 55">
    <g
      vector-effect="non-scaling-stroke"
      stroke="currentColor"
      stroke-width="0.7"
      fill="none"
      fill-rule="evenodd"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path d="M19.314 19.41c-.174-.349-.098-1.007-.137-1.396-.16-1.61.04-4.804-1.149-5.992-.122-.123-.121.032-.219 0-.928-.31-1.49 1.062-1.997 1.86-1.052 1.653-1.738 3.579-1.915 5.527-.066.72-.356 1.445-.356 2.162M16.058 18.123c.192.768-.354 1.453.028 2.216M19.588 20.011c0 .227-.134-.543 0-.766.224-.374.765-.529 1.176-.575 1.256-.14 1.626.567 1.478 1.752M22.474 20c.803-.489 2.023-.754 2.656-.374.195.116 1.36.752 1.41.948M28.316 20.23c-.273-.547-1.918.444-2.052.848M8.233 29.916c-1.064 0-.733-1.177-.575-1.97.15-.753.802-2.608 2.145-3.184 1.132-.485 1.95.029 2.48.557M9.765 34.622c-1.925.963-1.487-1.942-1.313-2.982.05-.3.278-.62.355-.93" />
      <path d="M16.538 32.347c-.444 0-.909-.147-1.35-.196-1.03-.114-2.081.02-3.117-.074-.398-.036-1.137-.071-1.374-.466-.615-1.024.423-1.404 1.276-1.546.222-.037.829-.17.908.147.229.915-2.549 1.524-3.116 1.596-2.91.363-6.432-.704-8.712-2.528M23.551 31.91c-.355.53-1.323-.24-1.687-.458-.039-.023-.2-.015-.22-.073-.043-.13.059-.499.165-.605.155-.155 1.65-.055 1.962-.055.108 0 .512.006.532.128.098.586-.517.713-.752 1.063zM23.185 31.269c-.122-.242-.263.38-.129.513M23.203 33.304c.171 0 .77 1.034.77 1.266M22.827 32.816c-.633.317-.773 1.404-1.244 1.875M28.38 32.605c1.194-.636 3.442-1.49 4.726-.916.173.077.455.078.599.214.776.737-.815 1.712-1.388 1.855-.224.056-.979.028-.748-.402.471-.876 1.971-1.202 2.837-1.366 1.563-.295 3.224-.34 4.81-.21 1.069.087 2.17.359 3.245.308 1.135-.053 2.71-.452 3.72.201M40.468 29.804c.196-.034.306-.902.364-1.092.448-1.467-1.07-2.697-2.09-3.421-.309-.22-.949-.464-1.324-.483-.063-.003-.096-.02-.094.05M37.53 22.057c-.335.178-.75-.039-1.022-.232M36.787 22.986c.271-.145.568.518.603.722M28.368 20.915c-.155-.533.174-1.294.29-1.82.515-2.344 1.754-4.346 3.536-5.996.456-.422 2.05-1.696 2.708-1.632.74.073 1.284 2.29 1.34 2.866.087.88.159 1.717.156 2.607-.004 1.192-.118 2.537-.421 3.69M33.888 17.429c-.024.614-.191 1.368-.484 1.9M41.235 29.885c.266-1.043 1.883-1.427 2.739-1.112.432.159 1.09.638.948 1.198M45.48 30.458c.372-.58 1.152-.793 1.816-.474.29.139.475.407.716.562M48.918 31.41c1.948-.726 4.035-.316 6.012.015 2.482.416 5.022.433 7.47 1.056M64.376 35.21l.214.123.154.093.092.061h0M66.07 36.035c.65.487 1.019 2.42 1.18 3.207.904 4.42-2.677 7.451-3.415 11.538M63.151 51.236c-.143.351-1.015.44-1.334.55-1.621.562-3.398.064-5.056.405M56.016 52.298c-.944.399-1.652-.849-1.505-1.624.182-.954 1.822-1.233 2.592-1.248.275-.006.535.139.807.171.17.02.385.056.587-.037M55.792 51.505c.094-.11.506-.185.504-.185M53.785 51.744c-.327.138-.894.03-1.251.057-1.05.083-2.158.286-3.2.008-.5-.133-1.378-.376-.984-1.08.379-.678 1.436-1.006 2.149-1.117.321-.05.626-.041.943-.066.027-.002.07.018.08-.006.004-.01-.458-.179-.502-.204-.245-.143-.73-.631-.753-.93M49.046 51.224c.163-.144.476-.231.685-.248M46.5 47.393c.245-.003.495.095.742.117a11.89 11.89 0 001.558.016c.146-.006.286-.033.43-.049.062-.006.208.045.188-.014-.037-.108-.222-.211-.296-.324M44.788 47.274c-.085.153-1.236 1.418-1.403 1.261-.154-.143-.56-.623-.82-.489-.302.156-.615.918-1.041.864-.42-.053-.816-.673-1.25-.728-.701-.089-1 .576-1.591.84-.121.054-.712.42-.652.096M36.242 44.292c.287.159.414.894.5 1.191.263.919.32 1.74.45 2.677.027.203-.119.479-.14.696-.056.547.026 1.12.177 1.646M36.9 51.016c.173-.156.824.087.994.188.593.353 1.21 1.272.776 2.002-.31.521-1.16.452-1.66.457-1.018.01-2.05-.277-3.074-.328-.635-.031-1.482.22-2.09-.017" />
      <path d="M36.965 51.46c.044.017-.226-.198-.284-.248-.157-.136-.402-.202-.597-.274M36.305 52.327c-.18-.192-.34-.466-.599-.561M31.03 52.324c.06-.123-.166-.512-.18-.667-.033-.366.02-.638.09-.988.023-.117.154-.216.154-.333M30.696 50.208c-1.145 1.145-3.223 1.393-4.411.205M26.157 50.977c-.582.873-1.927.626-2.552 0M22.797 50.977c.043 0-.287.174-.372.193a3.92 3.92 0 01-.91.115c-.29 0-.796-.436-.834-.436-.007 0-.058.183-.103.205-.263.132-.73-.202-.923-.346-.167-.125-.897-.731-.872-.731M19.258 52.606c-.153 0-.218-.35-.218-.462 0-.515.062-.793.423-1.154M12.325 52.998c.155.219 1.409.137 1.638.097.894-.154 1.765-.201 2.669-.067.366.054 1.559.363 1.875.193.129-.069.166-.287.28-.383M13.713 52.08c-.219-.006-.187-.542-.15-.69M12.033 52.432c-.602-.103-.39-1.18-.212-1.514M10.954 52.343c-.178.055-.292.166-.49.15-1.032-.088-.631-1.79-.192-2.294.4-.459 1.253-.371 1.76-.219M12.382 49.552c-.224-.231-.105-.838-.052-1.105.196-.988.644-1.899.786-2.904M13.116 45.543c-.096 0 .047-.754 0-1.454a6.28 6.28 0 00-.112-.856c-.02-.06-.301-.033-.367-.067-.32-.165-.62-.717-.643-1.054-.015-.218.483-.91.46-.93-.027-.026-.489.003-.7-.048-.624-.15-.965-.782-1.064-1.407-.074-.473.128-1.203.483-1.542.119-.114.225-.206.45-.354M35.789 44.292c1.152-.723.93-1.683.767-1.941-.029-.047-.087-.3-.075-.37.06-.33.091-.617.022-.956-.027-.134-.203-.388-.2-.397.024-.09.219-.868.202-1.073-.046-.548-.463-1.141-1.028-1.026M13.725 37.415c3.25 3.485 10.825 2.814 14.945 1.858 1.633-.38 3.344-.878 4.833-1.66.169-.09 1.544-.847 1.485-.89M39.074 33.112c1.036-.3.798-2.336-.215-2.523M36.94 35.606c.406.075.8.165 1.211.021.445-.156 1.602-1.16 1.44-1.721-.04-.134-.184-.198-.257-.305M10.657 37.572c-.516 0-.656-.87-.626-1.252.006-.08.056-.717 0-.492M58.23 48.899c-.334-.33-.616-.717-1-1M57.362 48.557c-1.957.427-2.813-.372-3.524-.89-1.388-1.01-2.377-3.793-2.462-5.46-.014-.283-.108-.621-.042-.9M67.102 37.983c.4-.434.865-.621 1.389-.82.513-.196 1.006-.572 1.517-.802.766-.344 1.471-.54 2.139-1.106.552-.468 2.237-2.505 1.012-3.119-.31-.156-.605.16-.937.065M73.466 32.174c2.503-.953 4.729-3.38 5.65-5.88.253-.69.828-1.932.548-2.668-.332-.87-1.303-.416-1.606-.694-.07-.065.18-.2.195-.212.381-.323.753-.669 1.127-1.013.802-.74 1.591-1.826 2.146-2.76.52-.875 1.405-2.634 1.063-3.705-.052-.164-.316-.477-.48-.539-.152-.058-.752.06-.715-.071" />
      <path d="M82.249 14.392c-.063.024.599-.486.762-.616.492-.395.994-.863 1.444-1.307 1.372-1.35 1.823-3.473 1.479-5.324-.15-.808-.97-2.044-1.704-2.444-.161-.088-1.07-.15-1.13-.258-.066-.12.113-.938.106-1.123-.025-.582-.79-1.677-1.35-1.874-1.075-.379-1.412-.263-2.381.202-.168.08-.364.385-.383.575-.008.086.024.314-.04.256-.088-.081.034-.603-.005-.737-.156-.528-1.327-.667-1.754-.587-1.851.345-2.577 1.864-3.466 3.4-.245.424-.449.936-.524 1.42-.01.063-.03.61-.076.613-.047.002-.942.38-1.29.53-2.073.891-2.658 3.323-3.439 4.88-.41.819-.882 2.13-.71 3.055.065.35.6.888.972.747.473-.18.614-.995.1-1.225-1.232-.553-3.183 2.608-3.547 3.276-.191.352-.358.72-.513 1.09-.1.237-.277.758-.341.954-.111.34-.314 1-.401 1.339-1.064 4.11-1.438 8.195-.977 12.42M20.098 28.113c-.046 1.026-.727 1.861-1.735 2.22-1.421.508-3.286-.392-3.306-2.046-.007-.665.105-1.538.561-2.052.86-.968 2.884-1.194 3.815-.198.483.516.695 1.402.665 2.076z" />
      <path d="M16.387 25.772c-.59.885-.616 1.736-.24 2.757.087.236.168.55.352.734M18.659 25.654c.14 0 .098.39.098.49 0 .437-.41 1.074-.196 1.5.09.18.194.4.448.336.211-.053.248-.37.28-.533.007-.032.047-.098.014-.098-.077 0-.162.472-.168.533-.052.521.117 1.176.28 1.667M33.11 27.732c-.113 1.28-.876 1.788-1.32 2.035-1.593.89-3.222.85-3.889-1.194-.643-1.971 1.594-3.927 3.477-3.275 1.057.366 1.825 1.395 1.733 2.434z" />
      <path d="M32.032 26.702c-.235 1.507-1.99 1.007-1.57-.336.161-.513.917-.895 1.312-.424.325.388.29.836.13 1.288M32 27.13c.055.058.16.058.2.112.284.39.24 1.043.211 1.496M28.676 26.17c-.31.931-.297 2.169.472 2.937M13.37 22.537c-.292-.146-.654.05-.901.173-.74.37-.998 1.103-.998 1.937" />
    </g>
  </svg>
))`
  position: absolute;
  height: 5.5rem;
  right: 0;
  bottom: calc(50% - 5rem);
  color: var(--color-passive);

  ${tablet`
    bottom: calc(50% - 4rem);
  `}

  ${mobile`
    bottom: calc(50% - 3rem);
    height: 4rem;
  `}
`;

const Wrapper = styled('footer')`
  display: grid;
  grid-template-columns: 1fr min(${sizes.page}px, 100%) 1fr;
  grid-template-rows: 9rem;
  position: relative;
  padding: 0 2ch 2rem 2ch;
  box-sizing: border-box;
  width: 100vw;
  left: 50%;
  margin-left: -50vw;

  & > * {
    grid-column: 2;
  }
`;

const Content = styled('div')`
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: flex-end;
  margin-bottom: 2rem;

  ${tablet`
    margin-bottom: 1rem;
  `}
`;

const Share = styled('a')`
  position: relative;
  display: block;
  line-height: 1.0;
  font-size: 1.1em;
  color: var(--color-active);
  text-decoration: none;
  margin-top: 0.5rem;
  transition: filter 0.3s ease;
  z-index: 1;

  font-weight: var(--text-weight-bold);
  font-variation-settings:
    "wght" var(--text-weight-bold)
    "opsz" var(--text-width-headline);

  &:before {
    display: inline-block;
    width: 1em;
    height: 1em;
    content: '';
    margin-right: 1ch;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    background-image: url('${twitterSvg}');
    transform: translate(0, 0.15em);
  }

  ${desktop`
    &:hover {
      filter: hue-rotate(-20deg) brightness(1.4);
    }
  `}

  ${tablet`
    font-size: 0.9em;
  `}

  ${mobile`
    font-size: 0.8em;
  `}
`;

const Footer = ({ page, children }) => {
  const onClick = useCallback(() => {
    galite('send', 'social', 'Twitter', 'share', document.location.pathname);
  }, []);

  return (
    <Wrapper>
      <Content>
        <Halloumi aria-hidden="true" />
        {page ? (
          <Share href={getTwitterShareLink(page)}>
            share on twitter
          </Share>
        ) : null}
      </Content>
      {children}
    </Wrapper>
  );
};

export default Footer;
